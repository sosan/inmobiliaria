{% extends "base_menu_admin.html" %}

{% block titulo %}AÑADIR VIVIENDA{% endblock %}

{% block footer_alta_piso %}
    <div class="col-xs-5 show_clicked_abajo text-center">
         <a href="{{ url_for("alta_piso") }}">
        <span class="glyphicon glyphicon-plus glyphicon_font_footer"></span>
        <div class="pageTitleC ">AÑADIR</div>
             </a>
    </div>
{% endblock %}


{% block contenido_central %}
    <div class="container center-block">

    <form action="{{url_for("recibir_alta_piso") }}" method="POST">
        <div class="row">
            <h1>DATOS DE LA VIVIENDA</h1>
        </div>
        <input type="hidden" name="usuario" value="{{ session["usuario"] }}">

        {% if session["mensajeerror"] == 0%}

        {% elif session["mensajeerror"] == 2 %}
            <h1 class=" label-danger">YA EXISTE EL INMUEBLE</h1>
        {% elif session["mensajeerror"] == 1 %}
            <h3 class="  label-success">DADO DE ALTA CORRECTAMNTE</h3>
            {% if anterior_calle and anterior_numero %}
                <p>Calle: {{ anterior_calle }} Numero: {{ anterior_numero }}</p>
            {% endif %}

        {% endif %}
        <div class="row center-block">
            <fieldset class="borde_fieldset">
                <legend class="borde_fieldset">Tipo de Vivienda</legend>
                 <ul>
                     <li>
                         <label for="casa1">Piso: </label>
                         <input type="radio" id="casa1" name="tipocasa" value="1" checked>
                     </li>

                     <li>
                         <label for="casa1">Chalet: </label>
                         <input type="radio" id="casa2" name="tipocasa" value="2">
                     </li>

                     <li>
                         <label for="casa1">Casa Rural: </label>
                         <input type="radio" id="casa3" name="tipocasa" value="3">
                     </li>
                     <li>

                         <label for="casa1">Oficina: </label>
                         <input type="radio" id="casa4" name="tipocasa" value="4">

                     </li>

                 </ul>
            </fieldset>
        </div>


        <div class="row center-block">
             <label>Zona de Palma:</label>
             <select name="zonas">
                 <option value="1" {% if zonas == "1" %} selected {% endif %}>Jaume III</option>
                 <option value="2"{% if zonas == "2" %} selected {% endif %} >Son Canals</option>
                 <option value="3" {% if zonas == "3" %} selected {% endif %} >Santa Calatina</option>
                 <option value="4" {% if zonas == "4" %} selected {% endif %} >Son Espanyolet</option>
                 <option value="5" {% if zonas == "5" %} selected {% endif %}>Archiduc</option>
                 <option value="6" {% if zonas == "6" %} selected {% endif %}>Es Forti</option>
                 <option value="7" {% if zonas == "7" %} selected {% endif %}>Can Capes</option>
                 <option value="8" {% if zonas == "8" %} selected {% endif %}>Sant Juame</option>
                 <option value="9" {% if zonas == "9" %} selected {% endif %}>Montision</option>
                 <option value="10" {% if zonas == "10" %} selected {% endif %}>Plaça Patins</option>
                 <option value="11" {% if zonas == "11" %} selected {% endif %}>Bons Aires</option>
                 <option value="12" {% if zonas == "12" %} selected {% endif %}>Calatrava</option>
                 <option value="13" {% if zonas == "13" %} selected {% endif %}>Son Fortesa</option>
                 <option value="14"{% if zonas == "14" %} selected {% endif %}>Cort</option>
                 <option value="15"{% if zonas == "15" %} selected {% endif %}>Son Rullan</option>
                 <option value="16"{% if zonas == "16" %} selected {% endif %}>San Nicolau</option>
                 <option value="17"{% if zonas == "17" %} selected {% endif %}>Sindicat</option>
                 <option value="18"{% if zonas == "18" %} selected {% endif %}>Fuera Palma</option>
             </select>
        </div>
        <div class="row center-block">
             <label>Calle</label>
             <input type="text" name="calle" value="{{ calle }}">
        </div>
        <div class="row center-block">
             <label>numero</label>
             <input type="text" name="numero" value="{{ numero }}">
        </div>
        <div class="row center-block">
         <label>Codigo Postal</label>
         <input type="text" name="cp" value="{{ cp }}">
        </div>
        <div class="row center-block">

         <label>Localidad</label>
         <input type="text" name="localidad" value="{{ localidad }}">
        </div>
        <div class="row center-block">

          <label>Dueño:</label>
          <input type="text" name="dueno" value="{{ dueno }}">
        </div>
        <div class="row center-block">
            <label>Precio:</label>
            <input type="text" name="precio" value="{{ precio }}">
        </div>
        <div class="row center-block">
            <label>Total metros cuadrados:</label>
            <input type="text" name="totalmetros" value="{{ totalmetros }}">
        </div>
        <div class="row center-block">
         <label>Habitaciones</label>

         <input type="text" name="habitaciones" value="{{ habitaciones }}">

        </div>
        <div class="row center-block">
         <label for="banos">Baños:</label>
         <input type="text" id="banos" name="numerobanos" value="{{ numerobanos }}">
        </div>
        <div class="row center-block ">
        {% if template %}
            <label>Tipo de planta:</label>
            <label>
                <input type="radio" name="template" value="1" {% if template == "1" %} checked {% endif %}>
                <img src="{{url_for("static", filename="images/template1.png")}}" width="100">
            </label>

            <label>
                <input type="radio" name="template" value="2" {% if template == "2" %} checked {% endif %}>
                <img src="{{url_for("static", filename="images/template2.png")}}" width="100">
            </label>

            <label>
                <input type="radio" name="template" value="3" {% if template == "3" %} checked {% endif %}>
                <img src="{{url_for("static", filename="images/template3.png")}}" width="100">
            </label>
        {% else %}
            <label>Tipo de planta:</label>
            <label>
                <input type="radio" name="template" value="1" checked>
                <img src="{{url_for("static", filename="images/template1.png")}}" width="100">
            </label>

            <label>
                <input type="radio" name="template" value="2" checked>
                <img src="{{url_for("static", filename="images/template2.png")}}" width="100">
            </label>

            <label>
                <input type="radio" name="template" value="3" checked>
                <img src="{{url_for("static", filename="images/template3.png")}}" width="100">
            </label>


        {% endif %}


            </div>
        <div class="row center-block">

         <label>Negocio: </label>

         {% if alquiler %}
            <label for="alquiler1"> Venta:</label>
            <input type="radio" id="alquiler1" name="alquiler" value="1"  {% if alquiler == "1" %} checked {% endif %}>

            <label for="alquiler2">Alquiler:</label>
            <input type="radio" id="alquiler2" name="alquiler" value="2" {% if alquiler == "2" %} checked {% endif %}>
        {% else %}
            <label for="alquiler1"> Venta:</label>
            <input type="radio" id="alquiler1" name="alquiler" value="1" checked>

            <label for="alquiler2">Alquiler:</label>
            <input type="radio" id="alquiler2" name="alquiler" value="2">
        {% endif %}



        </div>
        <div class="row center-block">
            <fieldset class="borde_fieldset">
                <legend class="borde_fieldset">Posicion GPS:</legend>
                <div class="control-group">

                        <label for="latitude_gps">Latitud: </label>
                        <input type="text" id="latitude_gps" name="latitude_gps" value="{{ latitude_gps }}">

                         <label for="longitude_gps">Longitud: </label>
                         <input type="text" id="longitude_gps" name="longitude_gps" value="{{ longitude_gps }}">

                         <label for="precision">Precision: </label>
                         <input type="text" id="precision" name="precision" value="{{ precision }}">


                </div>
            </fieldset>

        </div>
            <!-- imagen para subir-->
        <br>

    <div class="container-fluid  text-center">
{#        <a href="{{ url_for("menu_admin") }}" class="pull-left"><button class="btn btn-danger" type="button">HOME</button></a>#}


        <button type="submit" class="btn btn-success btn-lg">ALTA PISO</button>


    </div>
    </form>
</div>
    <br><br>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
    $(document).ready(showPosition());

    function showPosition() {
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position)
            {
                var positionInfo = " Latitude: " + position.coords.latitude +
                    " Longitude: " + position.coords.longitude +
                    " Precision: " +  position.coords.accuracy + " metros" +
                    " Elevacion: " + position.coords.altitude;

                document.getElementById("latitude_gps").innerHTML =  position.coords.latitude.toString() ;
                document.getElementById("longitude_gps").innerHTML =  position.coords.longitude.toString() ;
                document.getElementById("precision").innerHTML = position.coords.accuracy.toString();


            }, function(error)
            {

                switch(error.code)
                {
                    case error.PERMISSION_DENIED:
                        x.innerHTML = "User denied the request for Geolocation.";
                    break;
                    case error.POSITION_UNAVAILABLE:
                        x.innerHTML = "Location information is unavailable.";
                    break;
                    case error.TIMEOUT:
                        x.innerHTML = "The request to get user location timed out.";
                    break;
                    default:
                        x.innerHTML = "An unknown error occurred.";
                    break;
                }

            }, {maximumAge:10000, timeout:5000, enableHighAccuracy: true});

        } else {
            alert("Sorry, your browser does not support HTML5 geolocation.");
        }
    }


    </script>
{% endblock %}